# LangGraph Multi-Agent with Generative UI

[![CI](https://github.com/langchain-ai/new-langgraph-project/actions/workflows/unit-tests.yml/badge.svg)](https://github.com/langchain-ai/new-langgraph-project/actions/workflows/unit-tests.yml)
[![Integration Tests](https://github.com/langchain-ai/new-langgraph-project/actions/workflows/integration-tests.yml/badge.svg)](https://github.com/langchain-ai/new-langgraph-project/actions/workflows/integration-tests.yml)

A sophisticated multi-agent system built with [LangGraph](https://github.com/langchain-ai/langgraph) that demonstrates **Generative UI** capabilities. The agent intelligently routes between weather queries and task planning, responding with both conversational text and rich, animated UI components.

<div align="center">
  <img src="./static/studio_ui.png" alt="Graph view in LangGraph studio UI" width="75%" />
</div>

## Features

ğŸŒ¤ï¸ **Smart City Detection** - Automatically identifies cities from natural language queries  
ğŸ“ **AI-Powered Task Planning** - Uses OpenAI to generate detailed step-by-step plans from user requests  
ğŸ¨ **Generative UI** - Backend dynamically commands frontend to render specific components  
âœ¨ **Animated Components** - Modern glass morphism design with interactive todo lists and weather cards  
ğŸ§  **Intelligent Routing** - Automatically routes between weather and task planning based on query content  
ğŸ”„ **Hot Reload Development** - Real-time updates during development with LangGraph Studio  
ğŸ§ª **Comprehensive Testing** - Unit and integration tests with CI/CD workflows

## How It Works

### Weather Queries
1. **User Input**: "What's the weather in London?"
2. **Smart Routing**: Agent identifies weather-related keywords
3. **City Detection**: Agent identifies "London" from the query
4. **Dual Response**: 
   - Conversational AI message: "Here's the weather for London"
   - UI Command: Renders animated weather card for London
5. **Rich Display**: Interactive weather card with temperature, conditions, and animations

### Task Planning
1. **User Input**: "Help me plan a birthday party"
2. **Smart Routing**: Agent identifies task/planning keywords
3. **OpenAI Integration**: Calls GPT-3.5-turbo to generate detailed plan
4. **Dual Response**:
   - Conversational AI message: "I've created a task plan for: Birthday Party Planning"
   - UI Command: Renders interactive todo list with checkboxes
5. **Rich Display**: Animated todo card with progress tracking and completion badges

### Supported Cities
- **London** ğŸŒ§ï¸ - Gray stormy gradient (59Â°F)
- **New York** â˜€ï¸ - Sunny orange gradient (68Â°F) 
- **Tokyo** ğŸŒ¤ï¸ - Pink sunset gradient (75Â°F)
- **San Francisco** â›… - Blue ocean gradient (72Â°F, default)

### Example Todo Queries
- "Create a checklist for moving to a new apartment"
- "Help me organize my work schedule"
- "Plan steps for learning a new programming language"
- "What tasks do I need for hosting a dinner party?"

## Getting Started

<!--
Setup instruction auto-generated by `langgraph template lock`. DO NOT EDIT MANUALLY.
-->

<!--
End setup instructions
-->

1. Install dependencies, along with the [LangGraph CLI](https://langchain-ai.github.io/langgraph/concepts/langgraph_cli/), which will be used to run the server.

```bash
cd path/to/your/app
pip install -e . "langgraph-cli[inmem]"
```

2. Create a `.env` file and configure your API keys.

```bash
cp .env.example .env
```

**Required for Todo Planning**: Add your OpenAI API key to enable task planning functionality:

```text
# .env
OPENAI_API_KEY=your_openai_api_key_here
```

**Optional**: If you want to enable LangSmith tracing, add your LangSmith API key:

```text
# .env
LANGSMITH_API_KEY=lsv2...
```

> **Note**: Without an OpenAI API key, the todo planner will fall back to a basic template with generic tasks.

3. Start the LangGraph Server.

```shell
langgraph dev
```

For more information on getting started with LangGraph Server, [see here](https://langchain-ai.github.io/langgraph/tutorials/langgraph-platform/local-server/).

## Architecture

### Core Components

- **`langgraph.json`** - Configuration hub connecting backend graph to frontend UI
- **`src/agent/graph.py`** - Weather agent with city detection and UI emission logic
- **`src/agent/ui.tsx`** - Animated React weather card component
- **`tests/`** - Comprehensive unit and integration test suites

### Generative UI Flow

```
User Query â†’ City Detection â†’ Dual Response
    â†“              â†“              â†“
"weather in    "London"     AI Message +
 london"                    UI Command
                                â†“
                         WeatherComponent
                         (London styling)
```

### Key Functions

- `weather()` in `graph.py` - Processes queries and emits UI components
- `push_ui_message("weather", {city}, message)` - Commands frontend rendering
- `WeatherComponent` - Renders animated cards with city-specific data

## How to Customize

### Adding New Cities

1. **Update city detection** in `src/agent/graph.py`:
```python
if "paris" in message_content.lower():
    city = "Paris"
```

2. **Add weather data** in `src/agent/ui.tsx`:
```typescript
const mockWeatherData = {
  Paris: {
    temperature: "18Â°C",
    condition: "ğŸŒ§ï¸ Rainy",
    // ...
  }
}
```

3. **Add city-specific styling** with gradients and colors

### Extending the Graph

- **Add new nodes**: Extend the graph in `src/agent/graph.py` for more complex workflows
- **Multiple UI components**: Create additional React components and register them in `langgraph.json`
- **Real weather API**: Replace mock data with actual weather service integration

## Development

While iterating on your graph in LangGraph Studio, you can edit past state and rerun your app from previous states to debug specific nodes. Local changes will be automatically applied via hot reload.

Follow-up requests extend the same thread. You can create an entirely new thread, clearing previous history, using the `+` button in the top right.

For more advanced features and examples, refer to the [LangGraph documentation](https://langchain-ai.github.io/langgraph/). These resources can help you adapt this template for your specific use case and build more sophisticated conversational agents.

LangGraph Studio also integrates with [LangSmith](https://smith.langchain.com/) for more in-depth tracing and collaboration with teammates, allowing you to analyze and optimize your chatbot's performance.

<!--
Configuration auto-generated by `langgraph template lock`. DO NOT EDIT MANUALLY.
{
  "config_schemas": {
    "agent": {
      "type": "object",
      "properties": {}
    }
  }
}
-->
